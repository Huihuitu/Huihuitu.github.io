<!DOCTYPE HTML>
<html>
<head>
<title>Home</title>
<meta name="viewport" content="width=device-width">
<meta charset="utf-8">
<link rel="stylesheet" href="css/common.css" />
<link rel="stylesheet" href="css/style.css" />
<script src="js/move8.js"></script>
<script>

	window.onload= function () {
		var  oBanner=document.querySelector('.banner');
		var oConent=document.querySelector('.conent');
		var oBox=document.querySelector('.box');
		var oMenu=document.querySelector('.menu');
        var oBannerN=document.querySelector('.banner_nav');
		var oGif=document.getElementById('gif');
		var oJb=document.querySelector('.jb');
		var oZy=document.querySelector('.zy');

		window.onscroll= function () {
			var scrTop=document.documentElement.scrollTop||document.body.scrollTop;
			if(scrTop>1){
				oBanner.style.height='40px';
				oConent.style.marginTop='180px';
				oBox.style.height='40px';
				oMenu.style.bottom='0';
				oConent.style.height='660px';
                move(oBannerN,{opacity:1},{time:600,type:'linear'});
				move(oGif,{height:40,opacity:1},{time:600,type:'linear'});
				move(oJb,{top:150},{time:600});
				move(oZy,{top:150},{time:600});
			}else {
				oBanner.style.height='360px';
				oBox.style.height='360px';
				oConent.style.marginTop='40px';
				oConent.style.height='960px';
				oMenu.style.bottom='-180px';
                move(oBannerN,{opacity:0},{time:600,type:'linear'});
				move(oGif,{height:360,opacity:1},{time:600,type:'linear'});
				move(oJb,{top:500},{time:600});
				move(oZy,{top:500},{time:600});
			}
		};

		var oLo=document.querySelector('.conent .logo');
		oLo.onclick= function () {
			move(oLo,{opacity:0},{time:600,type:'linear'});
			//oMenu.style.display='block';
			move(oMenu,{opacity:1},{time:1200,type:'linear'});
			move(oJb,{opacity:1},{time:1200,type:'linear'});
			move(oZy,{opacity:1},{time:1200,type:'linear'});
			oMenu.style.zIndex='2';
		};

		var oH3=document.querySelector('.menu_logo ');
		var r=5;
		var c=5;
		var n=0;
		var bl=false;
		for(var i=0;i<r;i++){
			for(var j=0;j<c;j++){
				var oS=document.createElement('span');
				oS.style.width = oH3.offsetWidth/c+'px';
				oS.style.height = oH3.offsetHeight/r+'px';
				oS.innerHTML = '<em class="front"></em><em class="back"></em>';
				oH3.appendChild(oS);
				oS.style.left = j*oS.offsetWidth+'px';
				oS.style.top = i*oS.offsetHeight+'px';
				var oFront=oS.children[0];
				var oBack=oS.children[1];
				oFront.style.backgroundPosition= -j*oS.offsetWidth+'px '+-i*oS.offsetHeight+'px';
				oBack.style.backgroundPosition= -j*oS.offsetWidth+'px '+-i*oS.offsetHeight+'px';
				oS.r=i;
				oS.c=j;
			}
		}
		oH3.onmouseout= function () {
			if(bl)return;
			bl=true;
			n++;
			var aS=oH3.children;
			for(var i=0;i<aS.length;i++){
				aS[i].style.WebkitTransition='1s all ease';
				(function (index) {
					setTimeout(function(){
						aS[index].style.WebkitTransform='perspective(800px) rotateY(180deg)';
					},(aS[i].r+aS[i].c)*100);
				})(i);
			}
			function tranend(){
				aS[aS.length-1].removeEventListener('transitionend',tranend,false);
				for(var i=0;i<aS.length;i++) {
					aS[i].style.WebkitTransition='none';
					var oFront=aS[i].children[0];
					var oBack=aS[i].children[1];
					oFront.style.backgroundImage='url("../img/'+(n%2)+'.png")';
					oBack.style.backgroundImage='url("../img/'+(n-1)%2+'.png")';

					aS[i].style.WebkitTransform=' perspective(800px) rotateY(0deg)';
				}
				bl=false;
			}
			aS[aS.length-1].addEventListener('transitionend',tranend,false);
		};


		function hoverDir(obj,ev){
			var w=obj.offsetWidth;
			var h=obj.offsetHeight;

			var x=w/2+obj.offsetLeft-ev.clientX;
			var y=h/2+obj.offsetTop-ev.clientY;

			return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
		}
		(function(){
			var aPus_aLi=document.querySelectorAll('.nav .nav_con .opus');
			var aPus_aSpan=document.querySelectorAll('.nav .nav_con .opus span');
			for(var i=0; i<aPus_aLi.length; i++){
				aPus_aLi[i].index=i;
				aPus_aLi[i].onmouseover=function(ev){
					var oEvent=ev || event;
					var n=hoverDir(this,oEvent);
					var from=oEvent.fromElement || oEvent.relatedTarget;
					if(this.contains(from))return;
					var oSpan=aPus_aSpan[this.index];
					switch(n){
						case 0:
							oSpan.style.left=250+'px';
							oSpan.style.top=0;
							break;
						case 1:
							oSpan.style.top=250+'px';
							oSpan.style.left=0;
							break;
						case 2:
							oSpan.style.left=-250+'px';
							oSpan.style.top=0;
							break;
						case 3:
							oSpan.style.top=-250+'px';
							oSpan.style.left=0;
							break;
					}
					move(oSpan,{left:0,top:0});
				};
				aPus_aLi[i].onmouseout=function(ev){
					var oEvent=ev || event;
					var n=hoverDir(this,oEvent);
					var to=oEvent.toElement || oEvent.relatedTarget;
					if(this.contains(to))return;
					var oSpan=aPus_aSpan[this.index];
					switch(n){
						case 0:
							move(oSpan,{left:250,top:0});
							break;
						case 1:
							move(oSpan,{left:0,top:250});
							break;
						case 2:
							move(oSpan,{left:-250,top:0});
							break;
						case 3:
							move(oSpan,{left:0,top:-250});
							break;
					}
				};
			}
		})();


	};
</script>
</head>
<body>
<div class="warp">
	<div class="banner">
		<img src="img/c.gif" id="gif"/>
		<div class="banner_nav">
            <a href="">HOME</a>
            <a href="">ABOUT</a>
            <a href="">SKILLS</a>
            <a href="">CONTACT</a>
        </div>
	</div>
	<div class="conent">
		<div class="box">
			<div class="menu">
				<h3 class="menu_logo"></h3>
			</div>
		</div>
		<h2>碉堡</h2>
		<div class="logo">
			<i></i>
			<span> My resume</span>
		</div>

		<p>Nothing impossible></p>
		<img src="img/jb.png" class="jb"/>
		<img src="img/zy.png" class="zy"/>
	</div>
	<div class="nav">
		<p>作品展示</p>
		<ul class="nav_con">
			<li class="opus bg1">
				<a href="javascript:;" target="_blank">
					<span>CSS/HTML</span>
				</a>
			</li>
			<li class="opus bg2">
				<a href="javascript:;" target="_blank">
					<span>JavaScript</span>
				</a>
			</li>
			<li class="opus bg3">
				<a href="javascript:;" target="_blank">
					<span>HTML5/CSS3</span>
				</a>
			</li>
		</ul>
	</div>
	<div class="footer">

	</div>
	<div class="partner">

	</div>

</div>
</body>
</html>