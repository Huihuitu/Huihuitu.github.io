<!DOCTYPE HTML>
<html>
<head>
<title>Home</title>
<meta name="viewport" content="width=device-width,user-scalab=no，ini-scale=1 ">
<meta charset="utf-8">
<link rel="stylesheet" href="css/common.css" />
<link rel="stylesheet" href="css/style.css" />
<script src="js/move8.js"></script>
<script>

	window.onload= function () {
		var  oBanner=document.querySelector('.banner');
		var oConent=document.querySelector('.conent');
		var oBox=document.querySelector('.box');
		var oMenu=document.querySelector('.menu');
        var oBannerN=document.querySelector('.banner_nav');
		var oGif=document.getElementById('gif');
		var oJb=document.querySelector('.jb');
		var oZy=document.querySelector('.zy');
		var oZy1=document.querySelector('.zy_1');
		var oJb1=document.querySelector('.jb_1');

		var oFixed=document.getElementById('fixed');
		var timer=null;
		var bl=false;
		oFixed.onclick=function(){
			move1(0,1000);
		};
		function move1(iTarget,time){
			var start=document.documentElement.scrollTop||document.body.scrollTop;
			var dis=iTarget-start;
			var count=Math.round(time/30);
			var n=0;
			clearInterval(timer);
			timer=setInterval(function(){
				n++;
				var a=1-n/count;
				var cur=start+dis*(1-a*a*a);

				document.documentElement.scrollTop=cur;
				document.body.scrollTop=cur;
				bl=false;

				if(n==count){
					clearInterval(timer);
				}
			},30);
		}
		window.onscroll= function () {
			var scrTop=document.documentElement.scrollTop||document.body.scrollTop;
			if(scrTop>1){
				oBanner.style.height='40px';
				oConent.style.marginTop='180px';
				oBox.style.height='40px';
				oMenu.style.bottom='25px';
				oConent.style.height='660px';
                move(oBannerN,{opacity:1},{time:600,type:'linear'});
				move(oGif,{height:40,opacity:1},{time:600,type:'linear'});
				move(oJb,{top:80},{time:600});
				move(oZy,{top:80},{time:600});
				move(oZy1,{top:130},{time:600});
				move(oJb1,{top:130},{time:600});
			}else {
				oBanner.style.height='360px';
				oBox.style.height='360px';
				oConent.style.marginTop='40px';
				oConent.style.height='960px';
				oMenu.style.bottom='-120px';
                move(oBannerN,{opacity:0},{time:600,type:'linear'});
				move(oGif,{height:360,opacity:1},{time:600,type:'linear'});
				move(oJb,{top:530},{time:600});
				move(oZy,{top:530},{time:600});
				move(oZy1,{top:565},{time:600});
				move(oJb1,{top:565},{time:600});
			}
			if(bl){
				clearInterval(timer);
			}
			bl=true;
		};

		var oLo=document.querySelector('.conent .logo');
		oLo.onclick= function () {
			move(oLo,{opacity:0},{time:600,type:'linear'});
			//oMenu.style.display='block';
			move(oMenu,{opacity:1},{time:1200,type:'linear'});
			move(oJb,{left:130},{time:300,type:'ease-out'});
			move(oZy,{right:130},{time:300,type:'ease-out'});
			move(oZy1,{opacity:1},{time:2200,type:'linear'});
			move(oJb1,{opacity:1},{time:2200,type:'linear'});
			oMenu.style.zIndex='2';
		};

		var oH3=document.querySelector('.menu_logo ');
		var aDiv = oH3.children;
		var r=5;
		var c=5;
		var now=0;
		var  ready=true;
		for(var i=0;i<c;i++){
			for(var j=0;j<r;j++){
				var oDiv=document.createElement('div');
				oH3.appendChild(oDiv);
				oDiv.style.width=oH3.offsetWidth/r+'px';
				oDiv.style.height=oH3.offsetHeight/c+'px';
				oDiv.style.backgroundPosition=-oDiv.offsetLeft+'px '+ -oDiv.offsetTop+'px';
				oDiv.c=i;
				oDiv.r=j;
			}
		}
		oH3.onmouseout= function () {
			if(!ready) return;
			ready=false;
			for(var i=0;i<aDiv.length;i++){
				(function(index){
					setTimeout(function(){
						move(aDiv[index],{opacity:0},{time:1200,fn:function(){
							now++;
							//now%=3;
							if(index==aDiv.length-1){
								for(var i=0;i<aDiv.length;i++){
									aDiv[i].style.backgroundImage = 'url("../img/'+(now%2)+'.png")';
									aDiv[i].style.opacity=1;
									oH3.style.backgroundImage = 'url("../img/'+(now-1)%2+'.png")';
								}
								ready=true;
							}
						}})	;
					},(aDiv[i].r+aDiv[i].c)*100)
				})(i);
			}
		};
			/*function tranend(){
				aS[aS.length-1].removeEventListener('transitionend',tranend,false);
				for(var i=0;i<aS.length;i++) {
					aS[i].style.WebkitTransition='none';
					var oFront=aS[i].children[0];
					var oBack=aS[i].children[1];
					oFront.style.backgroundImage='url("../img/'+(n%2)+'.png")';
					oBack.style.backgroundImage='url("../img/'+(n-1)%2+'.png")';

					aS[i].style.WebkitTransform=' perspective(800px) rotateY(0deg)';
				}
				bl=false;
			}
			aS[aS.length-1].addEventListener('transitionend',tranend,false);
		};*/


		function hoverDir(obj,ev){
			var w=obj.offsetWidth;
			var h=obj.offsetHeight;

			var x=w/2+obj.offsetLeft-ev.clientX;
			var y=h/2+obj.offsetTop-ev.clientY;

			return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
		}
		(function(){
			var aPus_aLi=document.querySelectorAll('.nav .nav_con .opus');
			var aPus_aSpan=document.querySelectorAll('.nav .nav_con .opus span');
			for(var i=0; i<aPus_aLi.length; i++){
				aPus_aLi[i].index=i;
				aPus_aLi[i].onmouseover=function(ev){
					var oEvent=ev || event;
					var n=hoverDir(this,oEvent);
					var from=oEvent.fromElement || oEvent.relatedTarget;
					if(this.contains(from))return;
					var oSpan=aPus_aSpan[this.index];
					switch(n){
						case 0:
							oSpan.style.left=250+'px';
							oSpan.style.top=0;
							break;
						case 1:
							oSpan.style.top=250+'px';
							oSpan.style.left=0;
							break;
						case 2:
							oSpan.style.left=-250+'px';
							oSpan.style.top=0;
							break;
						case 3:
							oSpan.style.top=-250+'px';
							oSpan.style.left=0;
							break;
					}
					move(oSpan,{left:0,top:0});
				};
				aPus_aLi[i].onmouseout=function(ev){
					var oEvent=ev || event;
					var n=hoverDir(this,oEvent);
					var to=oEvent.toElement || oEvent.relatedTarget;
					if(this.contains(to))return;
					var oSpan=aPus_aSpan[this.index];
					switch(n){
						case 0:
							move(oSpan,{left:250,top:0});
							break;
						case 1:
							move(oSpan,{left:0,top:250});
							break;
						case 2:
							move(oSpan,{left:-250,top:0});
							break;
						case 3:
							move(oSpan,{left:0,top:-250});
							break;
					}
				};
			}
		})();

		var oTab=document.getElementById('tab');
		var aTabli=oTab.children;
		for(var i=0;i<aTabli.length;i++){
			aTabli[i].style.left = i*40+'px';
		}
		for(var i=0;i<aTabli.length;i++){
			(function(index){
				aTabli[i].onmouseover= function () {
					for(var i=0;i<aTabli.length;i++){
						if(i<=index){
							move(aTabli[i],{left:i*40});
						}else if(i>index){
							move(aTabli[i],{left:820+(i-1)*40});
						}
					}
				}
			})(i);
		}




	};
</script>
</head>
<body>
<div class="warp">
	<div class="banner">
		<img src="img/c.gif" id="gif"/>
		<div class="banner_nav">
            <a href="">HOME</a>xcc
            <a href="">ABOUT</a>
            <a href="">SKILLS</a>
            <a href="">CONTACT</a>
        </div>
	</div>
	<div class="conent">
		<div class="box">
			<div class="menu">
				<h3 class="menu_logo"></h3>
			</div>
		</div>
		<h2>碉堡</h2>
		<div class="logo">
			<i></i>
			<span> My resume</span>
		</div>

		<p>Nothing impossible></p>
		<img src="img/jb.png" alt="jb" class="jb"/>
		<img src="img/zy.png" alt="zy" class="zy"/>
		<img src="img/opus.png" alt="opus"  class="zy_1"/>
		<img src="img/about.png" alt="about" class="jb_1"/>
	</div>
	<div class="nav">
		<p>作品展示</p>
		<ul class="nav_con">
			<li class="opus bg1">
				<a href="index_css.html" target="_blank">
					<span>CSS/HTML</span>
				</a>
			</li>
			<li class="opus bg2">
				<a href="index_js.html" target="_blank">
					<span>JavaScript</span>
				</a>
			</li>
			<li class="opus bg3">
				<a href="index_html5.html" target="_blank">
					<span>HTML5/CSS3</span>
				</a>
			</li>
		</ul>
	</div>
	<div class="footer">
		<h3>XXX</h3>
		<p>xxxxxxxxxxxxx<br/>xxxxxxxxxxxxx</p>
		<ul id="tab">
			<li>
				<img src="img/html.png" alt="html"/>
				<span style="background:#dccdbf">H<br/>T<br/>M<br/>L<br/></span>
			</li>
			<li>
				<img src="img/js.png" alt="js"/>
				<span style="background:#1a526d">
					J<br/>a<br/>v<br/>a<br/>S<br/>c<br/>r<br/>i<br/>p<br/>t<br/>
				</span>
			</li>
			<li>
				<img src="img/css.png" alt="css"/>
				<span style="background:#84d8ff">C<br/>S<br/>S<br/></span>
			</li>
		</ul>
	</div>
	<div class="partner">

	</div>
	<div id="fixed"></div>
</div>
</body>
</html>